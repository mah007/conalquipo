<?xml version="1.0" encoding="utf-8" ?>
<openerp>
    <data>

        <record id="view_stock_picking_form_inherit" model="ir.ui.view">
            <field name="name">inherit.stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">

                <xpath expr="//header" position="before">
                    <field name="mess_operated"  invisible="1"/>
                    <div class="alert alert-warning" role="alert" style="margin-bottom:0px;"
                         attrs="{'invisible': [('mess_operated','=',False)]}">
                        There is product in the dispatch order that requires operator, please select the equipment operator.
                    </div>
                </xpath>

                <field name='name' position="after">
                    <field name="repair_requests" invisible="1"/>
                </field>

                <xpath expr='//header' position="inside">
                    <button name="generate_repair_requests" string="Repair requests" type="object" attrs="{'invisible': ['|', ('state', 'not in', ['done']), ('repair_requests', '=', True)]}"/>
                </xpath>

                <xpath expr='//field[@name="move_lines"]/tree//field[@name="product_id"]' position="after">
                    <field name="description" readonly="1"/>
                </xpath>

                <xpath expr='//field[@name="move_lines"]/tree//field[@name="product_uom"]' position="after">
                    <field name="mrp_repair_id" context="{'default_product_id': product_id, 'default_partner_id': parent.partner_id}"/>
                </xpath>

                <notebook position="inside">
                    <page string="Attachments">
                        <field name="attachment_ids" widget="many2many_binary"/>
                    </page>
                </notebook>

                 <field name="partner_id" position="after">
                    <field name="project_id" domain="[('partner_id', '=', partner_id)]" context="{'default_project_id': project_id}"/>
                </field>
                  <field name="location_id" position="replace">
                    <field name="location_id" domain="[('partner_id', '=', partner_id)]"
                           attr="{'invisible': [('picking_type_code', '=', 'outgoing')]}"/>
                </field>
                 <xpath expr="//notebook" position="before">
                    <group name="address_client_details" class="hidden-xs">
                        <group string="Shipping Address">
                            <field name="shipping_address" nolabel="1" readonly="1" style="display: inline-block;"/>
                        </group>
                        <group string="Invoice Address">
                            <field name="invoice_address" nolabel="1" readonly="1" style="display: inline-block;"/>
                        </group>
                    </group>
                 </xpath>

                <field name="move_line_ids" position="attributes">
                    <attribute name="context">{'address_in_id': partner_id, 'form_view_ref':'stock.view_move_picking_form',
                        'tree_view_ref':'stock.vpicktree', 'default_picking_type_id': picking_type_id,
                        'default_location_id': location_id, 'default_location_dest_id': location_dest_id}
                    </attribute>
                </field>

                <xpath expr='//field[@name="move_lines"]/tree//button[@name="action_show_details"]' position="before">
                    <button name="get_components_button" icon="fa-cubes" string="Components" type="object"/>
                </xpath>

            </field>
        </record>

        <record id="stock.vpicktree" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <tree decoration-info="state == 'draft'"
                      decoration-danger="state not in ('cancel', 'done') and scheduled_date &lt; current_date"
                      decoration-warning="state in ('waiting', 'cancel')"
                      decoration-primary="state=='confirmed'"
                      decoration-success="state=='done'"
                      string="Picking list">
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="project_id"/>
                    <field name="location_id"/>
                    <field name="location_dest_id" groups="stock.group_stock_multi_locations"/>
                    <field name="date" invisible="1"/>
                    <field name="scheduled_date"/>
                    <field name="origin"/>
                    <field name="group_id" invisible="1"/>
                    <field name="backorder_id"/>
                    <field name="state"/>
                    <field name="priority" invisible="1"/>
                    <field name="picking_type_id" invisible="1"/>
                    <field name="note"/>
                </tree>
            </field>
        </record>

    </data>
</openerp>